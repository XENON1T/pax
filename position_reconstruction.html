<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Position Reconstruction &mdash; Processor for Analyzing XENON1T 5.3.4 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '5.3.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Processor for Analyzing XENON1T 5.3.4 documentation" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="position-reconstruction">
<h1>Position Reconstruction<a class="headerlink" href="#position-reconstruction" title="Permalink to this headline">¶</a></h1>
<div class="section" id="intro">
<h2>Intro<a class="headerlink" href="#intro" title="Permalink to this headline">¶</a></h2>
<p>The position reconstruction of S2&#8217;s in the (x,y) plane is implemented in transformation plugins. Such a plugin will take an event and for each S2 peak reconstruct the original position of the interaction. Each peak will then be appended with a <cite>ReconstructedPosition</cite> object so other plugins in the processing chain can use this information.</p>
<p>PAX has the following position reconstruction methods:</p>
<ul class="simple">
<li>Maximum PMT: The position of the PMT that sees the most photons of the S2 yields the reconstructed position.</li>
<li>Charge-weighted mean: The reconstructed position is computed as the charge-weighted mean of PMTs hit.</li>
<li>Robust weighted mean: Iterative weighted mean. Improves charge-weighted mean by removing outliers in the hitpattern.</li>
<li>Neural Network (XENON100 only): The same neural network as used in xerawdp.</li>
<li>Chi-square-gamma reconstruction (XENON100 tested, XENON1T ready): The position is determined by comparing the hitpattern to expected values from a simulated LCE map. A test statistic is computed and yields the reconstructed position when minimized. This method also provides a per-event error on the reconstructed position (confidence contours) and is physically motivated.</li>
</ul>
</div>
<div class="section" id="charge-weighted-sum">
<h2>Charge-weighted Sum<a class="headerlink" href="#charge-weighted-sum" title="Permalink to this headline">¶</a></h2>
<p>For each S2 peak this algorithm calculates the charge-weighted sum and appends this information to the peak in the form of a <cite>ReconstructedPosition</cite> object.</p>
<div class="section" id="usage-and-settings">
<h3>Usage and Settings<a class="headerlink" href="#usage-and-settings" title="Permalink to this headline">¶</a></h3>
<p>In the configuration file, in the list of transformation plugins, include:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s1">&#39;PosSimple.PosRecWeightedSum&#39;</span>
</pre></div>
</div>
<p>Options:</p>
<ul class="simple">
<li>channels_to_use_for_reconstruction</li>
</ul>
<p>channels_to_use_for_reconstruction can either be <cite>top</cite> or <cite>bottom</cite></p>
</div>
</div>
<div class="section" id="chi-square-gamma-minimization">
<h2>Chi-square-gamma Minimization<a class="headerlink" href="#chi-square-gamma-minimization" title="Permalink to this headline">¶</a></h2>
<p>This plugin uses a simulated LCE map and an S2 hit pattern to construct a chi-square-gamma distribution function in the (x,y) plane. Then finding the global minimum of this function yields the reconstructed position. The function value at this position is a goodness-of-fit parameter &#8220;chi-square-gamma&#8221;. The plugin also calculates the number of degrees of freedom (ndf).</p>
<p>Since the chi-square-gamma function value at the reconstructed position is a goodness-of-fit parameter it can also be used to check how well other positions are reconstructed by calculating their chi-square-gamma value. Therefore the plugin checks if a peak already contains a <cite>ReconstructedPosition</cite> object created with another position reconstruction algorithm and appends the goodness-of-fit and ndf to these.</p>
<p>This method also provides a way to calculate confidence contours around each reconstructed position. This feature is still to be implemented.</p>
<p>The plugin currently works only in a XENON100 configuration since it depends on a simulated LCE map. When a per-PMT S2 LCE map is available for XENON1T, this method can also be used for XENON1T.</p>
<div class="section" id="id1">
<h3>Usage and Settings<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>The chi-square-gamma reconstruction is run by default in the XENON100.ini</p>
<p>To include the plugin in a custom .ini file, include:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s1">&#39;PosRecChiSquareGamma.PosRecChiSquareGamma&#39;</span>
</pre></div>
</div>
<p>There are currently several options that can be set or changed, these are:</p>
<ul class="simple">
<li>mode (default: <cite>full</cite>)</li>
<li>seed_from_neural_net (default: <cite>True</cite>)</li>
<li>ignore_saturated_PMTs (default: <cite>True</cite>)</li>
</ul>
<p><cite>mode</cite> can be either <cite>full</cite>, <cite>no_reconstruct</cite> or <cite>only_reconstruct</cite>:</p>
<ul class="simple">
<li><cite>no_reconstruct</cite> will only append a new goodness-of-fit and ndf parameter to existing <cite>ReconstructedPosition</cite> objects created with other algorithms.</li>
<li><cite>only_reconstruct</cite> will only do position reconstruction and append a new <cite>ReconstructedPosition</cite> object.</li>
<li><cite>full</cite> will do both.</li>
</ul>
<p><cite>seed_from_neural_net</cite> will use the position as reconstructed by the neural network as seed for the minimizer, if it is available.</p>
<p><cite>ignore_saturated_PMTs</cite> will remove saturated PMTs from the reconstruction completely. This is different from the case that the PMT sees nothing!</p>
</div>
<div class="section" id="working-principle">
<h3>Working principle<a class="headerlink" href="#working-principle" title="Permalink to this headline">¶</a></h3>
<p>The chi-square-gamma method is based on the calculation of a test statistic given a hit pattern and simulated LCE map. The minimum function value will yield the reconstructed position and the function value itself is a goodness-of-fit parameter called chi-square-gamma.</p>
<p>In short a chi-square statistic will allow to compare data to model values, a lower chi-square meaning a better fit. In our case we compare an S2 hit pattern (number of photons seen by each top PMT) to the expected pattern if the event originated from position (x,y), finding the (x,y) which gives the best agreement yields the reconstructed position. However, an S2 hit pattern has to be modelled with Poisson statistics since there are generally a low number of counts in a PMT. In this case a chi-square statistic will not accurately model the data. Fortunately a modified chi-square statistic exists for low counts, this is the modified chi-square distribution called chi-square-gamma as described by Mighell(1999).</p>
<p>As noted before, the method uses an LCE map, this simulated map gives the probability for a PMT in the top array to receive a photon out of the total photons detected in the top array from position (x,y). One complication is that the LCE map is not continuous but simulated on a grid. To provide the reconstruction algorithm with a continuous LCE, interpolation is used.</p>
<p>To minimize the function the plugin uses a SciPy minimizer using the Powell method. The starting position (or seed) of the minimizer is the position of the top PMT which sees the most signal, if a neural net position is already calculated this position is taken as start value.</p>
</div>
<div class="section" id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h3>
<p>To examine the performance of the position reconstruction plugins the PosrecTest IPython notebook in pax/examples can be used. Based on monte carlo hitpatterns sampled from the LCE map the chi-square-gamma method performs best overall.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Position Reconstruction</a><ul>
<li><a class="reference internal" href="#intro">Intro</a></li>
<li><a class="reference internal" href="#charge-weighted-sum">Charge-weighted Sum</a><ul>
<li><a class="reference internal" href="#usage-and-settings">Usage and Settings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#chi-square-gamma-minimization">Chi-square-gamma Minimization</a><ul>
<li><a class="reference internal" href="#id1">Usage and Settings</a></li>
<li><a class="reference internal" href="#working-principle">Working principle</a></li>
<li><a class="reference internal" href="#performance">Performance</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/position_reconstruction.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014, Christopher Tunnell.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="_sources/position_reconstruction.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>